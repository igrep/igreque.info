---
title: 第1回daab勉強会で発表しました
author: Yuji Yamamoto
date: July 17, 2018
...
---


# daabって？

私は今、[direct （ダイレクト）](https://direct4b.com/ja/)という企業向けチャットサービス向けのbotを開発しております。  
ビジネス向けチャットというと最近はSlackを思い浮かべる方が多いと思いますが、directはSlackに比べて良くも悪くもシンプルな作りとなっており、どちらかというとIT系以外の現場で広く使われているそうです。

[daab](https://direct4b.com/ja/bot/)は、そんなdirectのbotを作るための、おなじみHubotをベースにしたクライアントライブラリーです。  
2018年7月20日、そのdaabをテーマにした小さな勉強会、daab勉強会（ダブベン）が開かれました<small>（正直ダブベンという略称があまり好きじゃない...😅）</small>。  
小規模にやりたいという主催者の意向のため、connpassやdoorkeeperなどは使わず、「daabデベロッパー」という文字通りbot開発者専用の組織<small>（Slackで言うところの「ワークスペース」みたいなものです）</small>でこっそり募集されました。

# 私の発表

こちら👇です。

[第1回daab勉強会 発表](http://localhost:8000/slides/2018-07-12-direct-hs.html)

direct-hsという、Haskell製の非公式なdirectクライアントライブラリーを作っているので、それを紹介しました。  
kazuさんが作った`Channel`機能にフォーカスを当てて紹介したところ、やはり需要のある機能だというフィードバックをいただけたのでよかったです😁。  
directを作っているLisBでも、同じ問題を解決するために内部で独自のDSLを作ったりしたんだとか。

# そのほかの発見

- 発表に対するフィードバックとして知ったことですが、botの利用者が増えると、誰かが何らかの理由で中断してしまうことが度々あるそうです。  
  そのため日報botのような、ユーザーとの会話に状態があるbotについては、やっぱり状態を永続化しておいた方が無難だそうです。  
  状態を保存しないことで会話の流れを表現することを目指した`Channel`ですが、何らかの形で再開するための仕組みがあった方がよいことがわかりました。
- directにはスタンプとテキストメッセージを同時に投稿する機能があるというのを知りませんでした...。  
  現状のdirect-hsは[スタンプを表す値コンストラクター](https://github.com/iij-ii/direct-hs/blob/198401d7f652cdf065705ba1841957340b4e6d6c/src/Web/Direct/Types.hs#L176)に文字列が含まれていないことからわかるとおり、この機能をサポートできていません。早く対応しなくちゃ。

# 所感

これらに加えて、directの開発者と直接話していろいろフィードバックできて楽しかったです。  
シンプルがよいとしても、やっぱりSlackなどに比べて機能不足だなぁと日々感じていたので、これからもLisBさんにはどんどん拡張していただきたいです！お願いします！🙏🙏🙏
