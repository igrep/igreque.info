---
title: Windowsã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§ã®ã‚¯ã‚©ãƒ¼ãƒˆã®è©±
author: YAMAMOTO Yuji
tags: PowerShell
qiitaTags: PowerShell Windows
date: December 11, 2021
canonicalUrl: https://qiita.com/igrep/items/d4251d12e85cfc0a00df
...
---


ã“ã®è¨˜äº‹ã¯ã€ã‚‚ã¨ã‚‚ã¨Qrunchã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã«æ²è¼‰ã—ã¦ã„ãŸè¨˜äº‹ã§ã™ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ãªããªã£ã¦ã„ã¾ã—ãŸã€‚ä»Šå›ã€[ã‚°ã‚°ã£ã¦è§£æ±ºã—ã¥ã‚‰ã‹ã£ãŸã“ã¨ Advent Calendar](https://qiita.com/advent-calendar/2021/gseach)ã®ãƒ†ãƒ¼ãƒã«ã´ã£ãŸã‚Šã ã¨æ„Ÿã˜ãŸã®ã§11æ—¥ç›®ã®è¨˜äº‹ã¨ã—ã¦å†æ²è‡´ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€å…¬é–‹å½“æ™‚ã®å†…å®¹ã‚’ãã®ã¾ã¾è¼‰ã›ã¾ã™ã€‚

ã“ã“æ•°å¹´é–‹ç™ºæ™‚ã¯PowerShellã‚’ä½¿ã£ã¦ã„ã¦ã€ãšã£ã¨å›°ã£ã¦ã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚

ä¾‹ãˆã°`git commit`ã®`-m`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚’æ¸¡ã—ãŸããªã£ãŸã¨ãã€[PowerShellã§ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã«ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã‚’ä½¿ã†](https://bayashita.com/p/entry/show/90)ã¨ã®ã“ã¨ãªã®ã§ğŸ‘‡ã®ã‚ˆã†ã«æ›¸ã„ã¦ã¿ãŸã¨ã—ã¾ã™:

```pwsh
> git commit -m "Implement `"Hello, world`" finally!"
error: pathspec 'world finally!' did not match any file(s) known to git
```

ãªãœã‹ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆãŒé©åˆ‡ã«ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚Œã¦ã„ãªã„ã‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ãˆã°ã„ã„ã ã‚ã€ã¨æ€ã£ã¦ã‚„ã£ã¦ã¿ã¦ã‚‚ã‚„ã£ã±ã‚Šãƒ€ãƒ¡:

```pwsh
> git commit -m 'Implement "Hello, world" finally!'
error: pathspec 'world finally!' did not match any file(s) known to git
```

ãŠã‹ã—ã„ãªãã¨æ‚©ã¿ãªãŒã‚‰ã€ãªã‚“ã¨ãªããƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã®å‰ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã¦ã¿ãŸã¨ã“ã‚ã€ãªã‚“ã¨ã†ã¾ãã„ãã˜ã‚ƒã‚ã‚Šã¾ã›ã‚“ã‹ï¼

```pwsh
> git commit -m "Implement \`"Hello, world\`" finally!"
On branch master
Your branch is up to date with 'origin/master'.

...
```

ãªãœã ã‚ã†ã¨é¦–ã‚’ã²ã­ã£ã¦ã„ãŸã¨ã“ã‚ã€[Twitterã§ã“ã‚“ãªâ¬‡ï¸æƒ…å ±ã‚’æ•™ãˆã¦ã„ãŸã ãã¾ã—ãŸ](https://twitter.com/objectxplosive/status/1262768174761521152):

- [How Command Line Parameters Are Parsed](http://daviddeley.com/autohotkey/parameters/parameters.htm)

å¿…è¦ãªã¨ã“ã‚ã‚’ã‹ã„ã¤ã¾ã‚“ã§èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚

Windowsã«ãŠã„ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã™æœ€ã‚‚ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªAPIã€--- ã¤ã¾ã‚Šã€Windowsã§å­ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œã‚‹ã‚ã‚‰ã‚†ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–“æ¥çš„ã«ä½¿ã†API ---ã€[`CreateProcess`](https://docs.microsoft.com/ja-jp/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa?redirectedfrom=MSDN)ã§ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã¯ã€æ–‡å­—åˆ—ã®é…åˆ—ã§ã¯ãªã**ä¸€ã¤ã®æ–‡å­—åˆ—**ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹ãã†ãªã®ã§ã™ã€‚  
ã—ã‹ã—ã€ãã‚Œã§ã¯æ™®é€šã®Cè¨€èªã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›¸ã„ãŸã¨ã`main`é–¢æ•°ã®`argv`ãŒå¸¸ã«2ã¤ã®æ–‡å­—åˆ—<small>ï¼ˆ1ã¤ã‚ã¯ã‚³ãƒãƒ³ãƒ‰ã®åå‰ã§ã™ã­ï¼‰</small>ã«ãªã£ã¦ã—ã¾ã£ã¦ä¸ä¾¿ãªã®ã§ã€å‘¼ã³å‡ºã•ã‚ŒãŸ**ã‚³ãƒãƒ³ãƒ‰ãŒ<small>ï¼ˆ`main`é–¢æ•°ã«æ¸¡ã™å‰ã«ï¼‰</small>è‡ªã‚‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’ãƒ‘ãƒ¼ã‚¹**ã—ã¦ã„ã‚‹ã¨ã„ã†ã®ã§ã™ï¼

ãã®éš›ã©ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã‹ã¯ã€ä½¿ç”¨ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã€ç‰¹ã«Cã‚„C++ã§ã¯VC++ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ãã†ã§ã™ğŸ˜µï¼

å†’é ­ã§ç´¹ä»‹ã—ãŸãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚‚ã€ä¸Šè¨˜ã®ãƒšãƒ¼ã‚¸ã«ã‚‚ã£ã¨è©³ã—ãæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚  
ã¤ã¾ã‚Šãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã ã‘ã§ãªããƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã¯ã€PowerShellã®ä»•æ§˜ã§ã¯ãªãã€Windowsã§å‹•ãã‚³ãƒãƒ³ãƒ‰å…¨èˆ¬ã«é–¢ã™ã‚‹æŒ™å‹•ã ã£ãŸã‚“ã§ã™ã­ï¼  
ã©ã†ã‚Šã§PowerShellã«ã¤ã„ã¦è§£èª¬ã—ãŸãƒšãƒ¼ã‚¸ã«ã¯å‡ºã¦ã“ãªã„ãƒ¯ã‚±ã§ã™ã€‚

ãã—ã¦ã€ä»Šå›ã¯è©¦ã—ã¦ã¾ã›ã‚“ãŒã€ãã£ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã‚‚åŒã˜å•é¡Œã«ã¶ã¡å½“ãŸã‚‹ã®ã§ã—ã‚‡ã†ã€‚

Windowsã§ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã€ã¨ã„ã†è©±ã¯ã©ã“ã‹ã§èãè¦šãˆãŒã‚ã‚Šã¾ã—ãŸãŒã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã¨ã‹ã‚‚è‡ªå‰ã§å‡¦ç†ã—ã¦ãŸã‚“ã§ã™ã­ğŸ˜°...

ã¡ãªã¿ã«ã€å®Ÿã¯åŒã˜åŸå› ã®å•é¡Œã¯ã€`stack test`ã®`--test-arguments`ã‚’ä½¿ã†ã¨ãã«ã‚‚ã—ã°ã—ã°ã¶ã¡å½“ãŸã£ã¦ã„ã¾ã—ãŸã€‚  
ä¾‹ãˆã°ã€Hspecã§æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã®ã†ã¡ã€ãƒ†ã‚¹ãƒˆã®èª¬æ˜ã«`foo bar`ã¨ã„ã†ï¼ˆç©ºç™½ã‚’å«ã‚€ï¼‰æ–‡å­—åˆ—ã‚’å«ã‚€ã‚‚ã®ã‚’å®Ÿè¡Œã—ãŸã„ã¨ã:

```pwsh
> stack test --fast --test-arguments "--match `"foo bar`""
Error: While constructing the build plan, the following exceptions were encountered:

Unknown package: bar

Some different approaches to resolving this:


Plan construction failed.
```

ã“ã‚Œã‚‚`git commit`ã®å ´åˆã¨åŒæ§˜ã€ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã®å‰ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã‚Œã°å›é¿ã§ãã¾ã™ã€‚

```pwsh
> stack test --fast --test-arguments "--match \`"foo bar\`""
```

ã‚‚ã¡ã‚ã‚“ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ä»£ã‚ã‚Šã«ã€ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã§ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®å‰ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã‚‹ã®ã§ã‚‚ğŸ†—ã§ã™:

```pwsh
> stack test --fast --test-arguments '--match \"foo bar\"'
```

ã“ã‚Œã§å®Œç’§ï¼ğŸ™Œ  
Windowsã‚ã‚“ã©ãã•ã„ã­ï¼ğŸ
